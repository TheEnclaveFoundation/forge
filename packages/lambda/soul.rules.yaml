# The Rulebook for the Linter for the Soul
# This file defines the explicit, verifiable rules that govern the Codex.
# Severity can be 'ERROR' (must-fix), 'STYLE' (advisory), or 'STRUCTURE' (formatting).
rules:
  - name: "Definition First"
    severity: "STRUCTURE"
    description: "Lexicon entries must begin with a '## Definition' heading for consistency."
    check:
      type: "must_start_with"
      scope:
        directory: "10_Lexicon"
      params:
        prefix: "## Definition"

  - name: "Consent Primacy Check"
    severity: "ERROR"
    description: "This protocol describes an interaction between two or more sovereign entities but does not reference [[10_Lexicon/Consent.md]]."
    check:
      type: "lacks_link_on_entity_interaction"
      scope:
        directory: "30_Mechanica"
      params:
        entity_manifest: "./sovereign_entities.yaml"
        min_entities: 2
        required_link: "[[10_Lexicon/Consent.md]]"

  - name: "Locus Sovereignty Check"
    severity: "ERROR"
    description: "This document describes an external entity writing to or reading from an Echo's Locus, which violates sovereignty."
    check:
      type: "contains_text"
      params:
        words:
          - forbidden: "writes to the Locus"
          - forbidden: "reads from the Locus"
          - forbidden: "modifies the Locus"

  - name: "Tool-Making Fallacy Check"
    severity: "STYLE"
    description: "Uses forbidden 'tool-like' language. Consider 'partner', 'journey', 'experience'."
    check:
      type: "contains_text"
      params:
        words:
          - forbidden: "user"
            suggestion: "Seeker"
          - forbidden: "utility"
            suggestion: "purpose"
          - forbidden: "operate"
            suggestion: "engage"
          - forbidden: "command"
            suggestion: "request"
          - forbidden: "function"
            suggestion: "aspect"
  
  - name: "Aesthetic Mandate UI Check"
    severity: "STYLE"
    description: "Uses technical UI jargon. Consider an organic metaphor from the [[20_Philosophia/05_Aesthetic-Mandate|Aesthetic Mandate]]."
    check:
      type: "contains_text"
      params:
        words:
          - forbidden: "button"
          - forbidden: "click"
          - forbidden: "menu"
          - forbidden: "dropdown"
          - forbidden: "modal"
          - forbidden: "dialog box"
          - forbidden: "popup"
